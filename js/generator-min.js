function setupButtons(){document.getElementById("artsubmit").addEventListener("click",(function(e){e.preventDefault();var t=getFormData();console.log(t.djimage),t.djimage?convertImageToBase64(t.djimage):postFormToServer(t,!1)}))}function convertImageToBase64(e){var t=document.getElementById("converter-img");if(e.size>0){var n=new FileReader;n.onload=function(e){t.src=e.target.result,postFormToServer(getFormData(),!0)},n.readAsDataURL(e)}}function getFormData(){var e=document.getElementById("djcreds"),t=new FormData(e),n=Object.fromEntries(t);return console.log(n),n}function postFormToServer(e,t){let n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.onreadystatechange=function(){4===this.readyState&&200===this.status&&this.responseText&&(document.getElementById("art-preview").src=this.responseText)};var o="";if(t){var r=document.getElementById("converter-img");o="&image="+encodeURI(r.src)}var a="id="+e.templateid+"&text1="+e.text1+"&text2="+e.text2+"&text3="+e.text3+"&text4="+e.text4+o;console.log(a),n.open("POST","/",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(a)}document.addEventListener("DOMContentLoaded",(function(){setupButtons()}));